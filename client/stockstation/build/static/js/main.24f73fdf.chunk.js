(this.webpackJsonpstockstation=this.webpackJsonpstockstation||[]).push([[0],{75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var a=r(0),s=r(10),n=r.n(s),o=r(9),i=r.n(o),c=r(12),u=r(15),l=r(16),d=r(18),h=r(17),p="SIGNIN",j="SIGNUP",b="SIGNEDIN_MAIN",m="FORGOT_PASSWORD",f=r(20),x=r(126),g=r(125),O=r(1),v=function(e){var t=e.setField,r=e.submitForm,a=e.values,s=e.fields;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("form",{onSubmit:r,children:[s.map((function(e){var r=e.key;return Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:r,name:r,autoComplete:"email",autoFocus:!0,type:"password"===r||"passwordConf"===r?"password":"",onChange:t,value:a[r],size:"small"})},r)})),Object(O.jsx)("div",{id:"auth-submit-container",children:Object(O.jsx)(x.a,{size:"small",color:"primary",variant:"outlined",type:"submit",children:" Submit"})})]})})},k="https://api.stockstation.gay",y={users:"/v1/users",myuser:"/v1/users/me",myuserAvatar:"/v1/users/me/avatar",sessions:"/v1/sessions",sessionsMine:"/v1/sessions/mine",resetPasscode:"/v1/resetcodes",passwords:"/v1/passwords/",product:"/v1/product",subscription:"/v1/subscribe"},w=(r(75),function(e){var t=e.error,r=e.setError;switch(t){case"":return Object(O.jsx)(O.Fragment,{});default:return Object(O.jsxs)("div",{className:"error",children:[Object(O.jsx)("span",{className:"error-hide",onClick:function(){return r("")},children:"x"}),"Error: ",t]})}}),S=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(u.a)(this,r),(a=t.call(this,e)).setField=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.submitForm=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,s,n,o,c,u,l,d,h,p,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),r=a.state,s=r.email,n=r.userName,o=r.firstName,c=r.lastName,u=r.password,l=r.passwordConf,d={email:s,userName:n,firstName:o,lastName:c,password:u,passwordConf:l},console.log(d),e.next=7,fetch(k+y.users,{method:"POST",body:JSON.stringify(d),headers:new Headers({"Content-Type":"application/json"})});case 7:if(h=e.sent,console.log(h),!(h.status>=300)){e.next=15;break}return e.next=12,h.text();case 12:return p=e.sent,a.setError(p),e.abrupt("return");case 15:return j=h.headers.get("Authorization"),localStorage.setItem("Authorization",j),a.setError(""),a.props.setAuthToken(j),e.next=21,h.json();case 21:b=e.sent,a.props.setUser(b),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",userName:"",firstName:"",lastName:"",password:"",passwordConf:"",error:""},a.fields=[{name:"Email",key:"email"},{name:"Username",key:"userName"},{name:"First name",key:"firstName"},{name:"Last name",key:"lastName"},{name:"Password",key:"password"},{name:"Password Confirmation",key:"passwordConf"}],a}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=this.state.error;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{error:r,setError:this.setError}),Object(O.jsx)(v,{setField:this.setField,submitForm:this.submitForm,values:t,fields:this.fields}),Object(O.jsx)("div",{id:"divider"}),Object(O.jsx)(x.a,{variant:"outlined",color:"primary",size:"small",onClick:function(t){return e.props.setPage(t,p)},children:"Sign in instead"})]})}}]),r}(a.Component),C=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(u.a)(this,r),(a=t.call(this,e)).setField=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.submitForm=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,s,n,o,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.state,s=r.email,n=r.password,o={email:s,password:n},e.next=5,fetch(k+y.sessions,{method:"POST",body:JSON.stringify(o),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((c=e.sent).status>=300)){e.next=12;break}return e.next=9,c.text();case 9:return u=e.sent,a.setError(u),e.abrupt("return");case 12:return l=c.headers.get("Authorization"),localStorage.setItem("Authorization",l),a.setError(""),a.props.setAuthToken(l),e.next=18,c.json();case 18:d=e.sent,a.props.setUser(d);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:"",error:""},a.fields=[{name:"Email",key:"email"},{name:"Password",key:"password"}],a}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=this.state.error;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{error:r,setError:this.setError}),Object(O.jsx)(v,{setField:this.setField,submitForm:this.submitForm,values:t,fields:this.fields}),Object(O.jsxs)("div",{id:"auth-button-container",children:[Object(O.jsx)(x.a,{variant:"outlined",size:"small",color:"primary",onClick:function(t){return e.props.setPage(t,j)},children:"Sign up instead"}),Object(O.jsx)("div",{id:"divider"}),Object(O.jsx)(x.a,{variant:"outlined",size:"small",color:"primary",onClick:function(t){return e.props.setPage(t,m)},children:"Forgot password"})]})]})}}]),r}(a.Component),N=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(u.a)(this,r),(a=t.call(this,e)).sendResetCode=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,s,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.state.email,s={email:r},e.next=5,fetch(k+y.resetPasscode,{method:"POST",body:JSON.stringify(s),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((n=e.sent).status>=300)){e.next=12;break}return e.next=9,n.text();case 9:return o=e.sent,a.setError(o),e.abrupt("return");case 12:a.setError(""),alert("A reset code has been sent to your email"),a.setState({resetCodeSent:!0});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updatePassword=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,s,n,o,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.state,s=r.email,n=r.password,o=r.passwordConf,c=r.resetCode,u={password:n,passwordConf:o,resetCode:c},e.next=5,fetch(k+y.passwords+s,{method:"PUT",body:JSON.stringify(u),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((l=e.sent).status>=300)){e.next=12;break}return e.next=9,l.text();case 9:return d=e.sent,a.setError(d),e.abrupt("return");case 12:a.setError(""),alert("Your password has been updated");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setValue=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.state={email:"",password:"",passwordConf:"",resetCode:"",resetCodeSent:!1,error:""},a}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.email,a=t.password,s=t.passwordConf,n=t.resetCode,o=t.resetCodeSent,i=t.error;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{error:i,setError:this.setError}),o?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("form",{onSubmit:function(t){return e.updatePassword(t)},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"Password: "}),Object(O.jsx)("input",{name:"password",type:"password",onChange:this.setValue,value:a})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"Password Confirmation: "}),Object(O.jsx)("input",{name:"passwordConf",type:"password",onChange:this.setValue,value:s})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"Reset Code: "}),Object(O.jsx)("input",{name:"resetCode",onChange:this.setValue,value:n})]}),Object(O.jsx)("input",{type:"submit",value:"Update my password"})]})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("form",{onSubmit:function(t){return e.sendResetCode(t)},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"Email: "}),Object(O.jsx)("input",{name:"email",onChange:this.setValue,value:r})]}),Object(O.jsx)("input",{type:"submit",value:"Send me a reset code"})]})}),Object(O.jsx)("button",{onClick:function(t){return e.props.setPage(t,p)},children:"Back to sign in"})]})}}]),r}(a.Component),D=function(e){var t=e.page,r=e.setPage,a=e.setAuthToken,s=e.setUser;switch(t){case j:return Object(O.jsx)(S,{setPage:r,setAuthToken:a,setUser:s});case p:return Object(O.jsx)(C,{setPage:r,setAuthToken:a,setUser:s});case m:return Object(O.jsx)(N,{setPage:r});default:return Object(O.jsx)(S,{setPage:r,setAuthToken:a,setUser:s})}},T=(r(76),r(122)),A=r(121),P=r(115),E=r(123),U=r(81),z=r(124),F=r(113),I=Object(F.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}})),H=r(54),_=Object(H.a)({palette:{primary:{light:"#757ce8",main:"#3f50b5",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}}}),B=r(114),G=function(){return Object(O.jsxs)(U.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(O.jsx)(B.a,{color:"inherit",href:"https://material-ui.com/",children:"Yichi Zhang, Lyon Lu, Wendell Li, Lance Zhong"})," ",(new Date).getFullYear(),"."]})},M="USER_SUB",W="PRODUCT_CARD",R=r(116),L=r(119),V=r(118),q=r(117),J=r(30),Y=(r(77),function(e){var t=e.data,r=e.getSubData,a=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(k+y.subscription+"/".concat(t)),e.next=3,fetch(k+y.subscription+"/".concat(t),{headers:new Headers({Authorization:localStorage.getItem("Authorization")}),method:"DELETE"});case 3:if(!(e.sent.status>=300)){e.next=7;break}return alert("Unable to delete subscription. Please try again"),e.abrupt("return");case 7:alert("Delete Success!"),r();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,md:4,children:Object(O.jsxs)(R.a,{className:I.card,children:[Object(O.jsx)(q.a,{className:I.cardMedia,image:"https://source.unsplash.com/random",title:"Image title",style:{height:"15em"}}),Object(O.jsxs)(V.a,{className:I.cardContent,children:[Object(O.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.productName}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)("br",{}),"Subscribe date: ".concat(t.createdAt)]})]}),Object(O.jsx)(L.a,{children:Object(O.jsx)(J.a,{trigger:Object(O.jsx)(x.a,{size:"small",color:"primary",children:"Delete"}),position:"right center",modal:!0,nested:!0,children:function(e){return Object(O.jsxs)("div",{className:"modal",children:[Object(O.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(O.jsx)("div",{className:"header",children:" Confirm Deletion "}),Object(O.jsxs)("div",{className:"content",children:[" ","Are yous sure to delete this product subscription?"]}),Object(O.jsxs)("div",{className:"actions",children:[Object(O.jsx)(x.a,{variant:"outlined",color:"primary",className:"button",onClick:function(){console.log("modal closed "),e()},children:"Cancel"}),Object(O.jsx)(x.a,{variant:"outlined",color:"primary",className:"button",onClick:function(){a(t.subscribeID),e()},children:"Delete"})]})]})}})})]})},t.subscribeID)}),X=function(e){var t=e.data,r=e.getSubData,a=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={productID:t},console.log(a),e.next=4,fetch(k+y.subscription,{headers:new Headers({Authorization:localStorage.getItem("Authorization"),"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(a)});case 4:if(!((s=e.sent).status>=300)){e.next=9;break}return console.log(s),alert("Unable to create subscription Product data. Please try again"),e.abrupt("return");case 9:alert("Subscription Successful!"),r();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,md:4,children:Object(O.jsxs)(R.a,{className:I.card,children:[Object(O.jsx)(q.a,{className:I.cardMedia,image:t.imageLink,title:"Image title",style:{height:"15em"}}),Object(O.jsxs)(V.a,{className:I.cardContent,children:[Object(O.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.productName}),Object(O.jsx)(U.a,{children:"This is the newest gaming console released by Sony. Item sold out fast and please subscribe asap!"}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)("br",{}),Object(O.jsx)("a",{href:t.productLink,children:"Link to the product "})]})]}),Object(O.jsx)(L.a,{children:Object(O.jsx)(J.a,{trigger:Object(O.jsx)(x.a,{size:"small",color:"primary",children:"Subscribe"}),position:"right center",modal:!0,nested:!0,children:function(e){return Object(O.jsxs)("div",{className:"modal",children:[Object(O.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(O.jsx)("div",{className:"header",children:" Subscription Confirmation"}),Object(O.jsxs)("div",{className:"content",children:[" ","Please click to confirm your subscription"]}),Object(O.jsxs)("div",{className:"actions",children:[Object(O.jsx)(x.a,{variant:"outlined",color:"primary",className:"button",onClick:function(){console.log("modal closed "),e()},children:"Cancel"}),Object(O.jsx)(x.a,{variant:"outlined",color:"primary",className:"button",onClick:function(){a(t.productID),e()},children:"Confirm"})]})]})}})})]})},t.productName)},Z=function(e){switch(e.cardType){case W:return Object(O.jsx)(X,{data:e.data,getSubData:e.getSubData});case M:return Object(O.jsx)(Y,{data:e.data,getSubData:e.getSubData});default:return null}},$=(r(78),[{_id:1,product_name:"ps5",date:"2021-03-10",user:"abc"},{_id:2,product_name:"ps5",date:"2021-03-10",user:"abc"},{_id:3,product_name:"ps5",date:"2021-03-10",user:"abc"}]),K=[{product_name:"ps5",product_link:"https://www.bestbuy.com/site/sony-playstation-5-console/6426149.p?skuId=6426149",image_link:"https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1052&q=80",_id:1},{product_name:"ps6",product_link:"https://www.bestbuy.com/site/sony-playstation-5-console/6426149.p?skuId=6426149",image_link:"https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1052&q=80",_id:2},{product_name:"psX",product_link:"https://www.bestbuy.com/site/sony-playstation-5-console/6426149.p?skuId=6426149",image_link:"https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1052&q=80",_id:3}],Q=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"Stock Station"}),Object(O.jsx)(U.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:"Get notificaiton about popular products, instantly"})]})},ee=r(55),te=function(e){var t=e.setAuthToken,r=e.setUser,s=Object(a.useState)(""),n=Object(ee.a)(s,2),o=n[0],u=n[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x.a,{variant:"outlined",color:"primary",onClick:function(){var e=Object(c.a)(i.a.mark((function e(a){var s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch(k+y.sessionsMine,{method:"DELETE",headers:new Headers({Authorization:localStorage.getItem("Authorization")})});case 3:if(!((s=e.sent).status>=300)){e.next=10;break}return e.next=7,s.text();case 7:return n=e.sent,u(n),e.abrupt("return");case 10:localStorage.removeItem("Authorization"),u(""),t(""),r(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Sign out"}),o&&Object(O.jsx)("div",{children:Object(O.jsx)(w,{error:o,setError:u})})]})},re=(Object(H.a)({palette:{primary:{main:"#11cb5f"},secondary:{main:"#11cb5f"}}}),function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(u.a)(this,r),(a=t.call(this,e)).sendRequest=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,s,n,o,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.state,s=r.firstName,n=r.lastName,o=r.email,c={firstName:s,lastName:n,email:o},e.next=5,fetch(k+y.myuser,{method:"PATCH",body:JSON.stringify(c),headers:new Headers({Authorization:localStorage.getItem("Authorization"),"Content-Type":"application/json"})});case 5:if(!((u=e.sent).status>=300)){e.next=13;break}return e.next=9,u.text();case 9:return l=e.sent,console.log(l),a.setError(l),e.abrupt("return");case 13:return alert("Name changed"),e.next=16,u.json();case 16:d=e.sent,a.props.setUser(d);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setValue=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.state={firstName:"",lastName:"",error:""},a}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.firstName,a=t.lastName,s=t.error;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{error:s,setError:this.setError}),Object(O.jsx)(J.a,{trigger:Object(O.jsx)(x.a,{variant:"outlined",color:"primary",children:"Update User Info"}),position:"right center",modal:!0,nested:!0,children:function(t){return Object(O.jsxs)("div",{className:"modal",children:[Object(O.jsx)(U.a,{children:"Enter a new name"}),Object(O.jsxs)("form",{onSubmit:e.sendRequest,children:[Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"firstName",name:"firstName",autoComplete:"firstName",autoFocus:!0,type:"",onChange:e.setValue,value:r,size:"small"})}),Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"lastName",name:"lastName",autoComplete:"lastName",autoFocus:!0,type:"",onChange:e.setValue,value:a,size:"small"})}),Object(O.jsx)(x.a,{size:"small",type:"submit",color:"primary",children:" Submit"}),Object(O.jsx)(x.a,{size:"small",color:"primary",onClick:function(){t()},children:"Cancel"})]})]})}})]})}}]),r}(a.Component)),ae=function(e){var t=e.user,r=e.setUser,a=e.setAuthToken;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"Hi, ".concat(t.userName)}),Object(O.jsx)(U.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:"Ready to roll with Stock Station?"}),Object(O.jsxs)("div",{className:I.heroButtons,children:[Object(O.jsx)("br",{}),Object(O.jsxs)(P.a,{container:!0,spacing:2,justify:"center",children:[Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(re,{user:t,setUser:r})}),Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(te,{setUser:r,setAuthToken:a})})]})]})]})},se=r(120),ne=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){var e;return Object(u.a)(this,r),(e=t.call(this)).getCurrentUser=Object(c.a)(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.authToken){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch(k+y.myuser,{headers:new Headers({Authorization:e.state.authToken})});case 4:if(!((r=t.sent).status>=300)){t.next=11;break}return alert("Unable to verify login. Logging out..."),localStorage.setItem("Authorization",""),e.setAuthToken(""),e.setUser(null),t.abrupt("return");case 11:return t.next=13,r.json();case 13:a=t.sent,e.setUser(a),e.getSubscriptionData(),e.getProductData(),console.log("user is: ",e.state.user),console.log("auth token is: ",e.state.authToken),console.log("page is: ",e.state.page);case 20:case"end":return t.stop()}}),t)}))),e.getSubscriptionData=Object(c.a)(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.authToken){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch(k+y.subscription,{headers:new Headers({Authorization:e.state.authToken}),method:"GET"});case 4:if(!((r=t.sent).status>=300)){t.next=10;break}return alert("Unable to fetch subscription data. Please try again"),localStorage.setItem("Authorization",""),e.setAuthToken(""),t.abrupt("return");case 10:return t.next=12,r.json();case 12:a=t.sent,e.setUserSubscriptionData(a);case 14:case"end":return t.stop()}}),t)}))),e.getProductData=Object(c.a)(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.authToken){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch(k+y.product,{headers:new Headers({Authorization:e.state.authToken}),method:"GET"});case 4:if(!((r=t.sent).status>=300)){t.next=10;break}return alert("Unable to fetch Product data. Please try again"),localStorage.setItem("Authorization",""),e.setAuthToken(""),t.abrupt("return");case 10:return t.next=12,r.json();case 12:a=t.sent,e.setProductData(a);case 14:case"end":return t.stop()}}),t)}))),e.setPageToSignIn=function(t){t.preventDefault(),e.setState({page:p})},e.setPageToSignUp=function(t){t.preventDefault(),e.setState({page:j})},e.setPage=function(t,r){t.preventDefault(),e.setState({page:r})},e.setAuthToken=function(t){e.setState({authToken:t,page:""===t?p:b}),console.log("user is: ",e.state.user),console.log("auth token is: ",e.state.authToken),console.log("page is: ",e.state.page)},e.setUser=function(t){e.setState({user:t})},e.setUserSubscriptionData=function(t){e.setState({userSubscriptionData:t})},e.setProductData=function(t){e.setState({productData:t}),console.log("user is: ",e.state.user),console.log("auth token is: ",e.state.authToken),console.log("page is: ",e.state.page)},e.state={page:localStorage.getItem("Authorization")?b:p,authToken:localStorage.getItem("Authorization")||null,user:null,loading:!1,userSubscriptionData:$,productData:K},console.log("user is: ",e.state.user),console.log("auth token is: ",e.state.authToken),console.log("page is: ",e.state.page),e.getCurrentUser(),e}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.page,a=t.user;return Object(O.jsx)("div",{id:"main-container",children:Object(O.jsxs)(se.a,{theme:_,children:[Object(O.jsx)(A.a,{}),Object(O.jsx)(T.a,{position:"relative",children:Object(O.jsx)(E.a,{children:Object(O.jsx)(U.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Stock Station"})})}),Object(O.jsxs)("main",{children:[Object(O.jsx)("div",{className:I.heroContent,id:"Greeting",children:Object(O.jsx)(z.a,{maxWidth:"sm",children:a?Object(O.jsx)(ae,{user:a,setUser:this.setUser,setAuthToken:this.setAuthToken}):Object(O.jsx)(Q,{})})}),Object(O.jsx)("div",{id:"auth-page",children:(!a||this.state.page===p)&&Object(O.jsx)(D,{page:r,setPage:this.setPage,setAuthToken:this.setAuthToken,setUser:this.setUser})}),(this.state.userSubscriptionData||a)&&this.state.page===b&&Object(O.jsxs)("div",{id:"user-specific-info",children:[Object(O.jsxs)(z.a,{className:I.cardGrid,maxWidth:"md",children:[Object(O.jsx)("h1",{children:"Currently Available product "}),Object(O.jsx)(P.a,{container:!0,spacing:4,children:this.state.productData.map((function(t){return Object(O.jsx)(Z,{data:t,cardType:W,getSubData:e.getSubscriptionData})}))})]}),Object(O.jsxs)(z.a,{className:I.cardGrid,maxWidth:"md",children:[Object(O.jsx)("h1",{children:"Your Current subscription"}),Object(O.jsx)(P.a,{container:!0,spacing:4,children:this.state.userSubscriptionData.map((function(t){return Object(O.jsx)(Z,{data:t,cardType:M,getSubData:e.getSubscriptionData})}))})]})]})]}),Object(O.jsxs)("footer",{className:I.footer,children:[Object(O.jsx)(U.a,{variant:"h6",align:"center",gutterBottom:!0,children:"Stock Station"}),Object(O.jsx)(G,{})]})]})})}}]),r}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(O.jsx)(ne,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[79,1,2]]]);
//# sourceMappingURL=main.24f73fdf.chunk.js.map